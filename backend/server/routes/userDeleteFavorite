const express = require("express");
const router = express.Router();
const User = require("../models/userModel");

router.delete("/removeUserFavorite/:userId/:stationId", async (req, res) => {
    try {
      const { userId, stationId } = req.params;
  
      // Find the user by userId
      const user = await User.findById(userId);
  
      if (!user) {
        return res.status(404).json({ error: "User not found" });
      }
  
      // Remove the stationId from the user's favorites
      user.favorites.pull(stationId);
  
      // Save the updated user document
      await user.save();
  
      // Respond with a success message
      res.json({ message: "Station removed from favorites successfully" });
    } catch (error) {
      console.error("Error removing station from user favorites:", error);
      res.status(500).json({ error: "Internal Server Error" });
    }
});